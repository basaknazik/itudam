name: Otomatik GÃ¼ncelleme Robotu ğŸ¤–

on:
  workflow_dispatch: # Telefondan tetiklemek iÃ§in
  schedule:
    - cron: '0 */6 * * *' # 6 saatte bir Ã§alÄ±ÅŸÄ±r

permissions:
  contents: write

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Depoyu Ã‡ek
        uses: actions/checkout@v3

      - name: Python Kur
        uses: actions/setup-python@v4
        with:
          python-version: '3.9'

      - name: KÃ¼tÃ¼phaneleri YÃ¼kle
        run: |
          pip install requests
          pip install bs4

      # 1. ADIM: VERÄ°YÄ° Ã‡EK (Scraper)
      - name: ğŸ”„ Verileri GÃ¼ncelle
        run: python iturequestr.py

      # 2. ADIM: HTML OLUÅTUR (Builder)
      - name: ğŸ—ï¸ Siteyi OluÅŸtur
        run: python sitebuilder.py

      # 3. ADIM: GITHUB'A GÃ–NDER
      - name: ğŸš€ DeÄŸiÅŸiklikleri Ä°ÅŸle
        run: |
          git config user.name "Otomatik Robot"
          git config user.email "actions@github.com"
          # BURASI Ã‡OK Ã–NEMLÄ°: Yeni dosya isimlerini ekliyoruz
          git add index.html dersler.json
          git commit -m "Robot gÃ¼ncellemesi: $(date)" || exit 0
          git push
